(function(a){if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object"){a(require("knockout"),exports)}else{if(typeof define==="function"&&define.amd){define(["knockout","exports"],a)}else{a(ko,ko.mapping={})}}}(function(b,B){var d=true;var n="__ko_mapping__";var i=b.dependentObservable;var q=0;var m;var v;var a=["create","update","key","arrayChanged"];var r={};var h={include:["_destroy"],ignore:[],copy:[]};var w=h;function o(C,H){var G={};for(var F=C.length-1;F>=0;--F){G[C[F]]=C[F]}for(var F=H.length-1;F>=0;--F){G[H[F]]=H[F]}var E=[];for(var D in G){E.push(G[D])}return E}function p(C,F){for(var D in F){if(F.hasOwnProperty(D)&&F[D]){if(D&&C[D]&&!(B.getType(C[D])==="array")){p(C[D],F[D])}else{var E=B.getType(C[D])==="array"&&B.getType(F[D])==="array";if(E){C[D]=o(C[D],F[D])}else{C[D]=F[D]}}}}}function g(E,D){var C={};p(C,E);p(C,D);return C}B.isMapped=function(D){var C=b.utils.unwrapObservable(D);return C&&C[n]};B.fromJS=function(D){if(arguments.length==0){throw new Error("When calling ko.fromJS, pass the object you want to convert.")}window.setTimeout(function(){q=0},0);if(!q++){m=[];v=new c()}var E;var F;if(arguments.length==2){if(arguments[1][n]){F=arguments[1]}else{E=arguments[1]}}if(arguments.length==3){E=arguments[1];F=arguments[2]}if(F){E=g(E,F[n])}E=s(E);var C=x(F,D,E);if(F){C=F}if(!--q){window.setTimeout(function(){while(m.length){var G=m.pop();if(G){G()}}},0)}C[n]=g(C[n],E);return C};B.fromJSON=function(D){var C=b.utils.parseJson(D);arguments[0]=C;return B.fromJS.apply(this,arguments)};B.updateFromJS=function(C){throw new Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!")};B.updateFromJSON=function(C){throw new Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!")};B.toJS=function(D,C){if(!w){B.resetDefaultOptions()}if(arguments.length==0){throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.")}if(B.getType(w.ignore)!=="array"){throw new Error("ko.mapping.defaultOptions().ignore should be an array.")}if(B.getType(w.include)!=="array"){throw new Error("ko.mapping.defaultOptions().include should be an array.")}if(B.getType(w.copy)!=="array"){throw new Error("ko.mapping.defaultOptions().copy should be an array.")}C=s(C,D[n]);return B.visitModel(D,function(E){return b.utils.unwrapObservable(E)},C)};B.toJSON=function(E,C){var D=B.toJS(E,C);return b.utils.stringifyJson(D,null,2)};B.defaultOptions=function(){if(arguments.length>0){w=arguments[0]}else{return w}};B.resetDefaultOptions=function(){w={include:h.include.slice(0),ignore:h.ignore.slice(0),copy:h.copy.slice(0)}};B.getType=function(C){if((C)&&(typeof(C)==="object")){if(C.constructor==(new Date).constructor){return"date"}if(Object.prototype.toString.call(C)==="[object Array]"){return"array"}}return typeof C};function s(F,C){var D=g({},F);for(var E=a.length-1;E>=0;E--){var G=a[E];if(!D[G]){continue}if(!(D[""] instanceof Object)){D[""]={}}D[""][G]=D[G];delete D[G]}if(C){D.ignore=k(C.ignore,D.ignore);D.include=k(C.include,D.include);D.copy=k(C.copy,D.copy)}D.ignore=k(D.ignore,w.ignore);D.include=k(D.include,w.include);D.copy=k(D.copy,w.copy);D.mappedProperties=D.mappedProperties||{};return D}function k(D,C){if(B.getType(D)!=="array"){if(B.getType(D)==="undefined"){D=[]}else{D=[D]}}if(B.getType(C)!=="array"){if(B.getType(C)==="undefined"){C=[]}else{C=[C]}}return b.utils.arrayGetDistinctValues(D.concat(C))}function f(D,F){var E=b.dependentObservable;b.dependentObservable=function(M,G,J){J=J||{};if(M&&typeof M=="object"){J=M}var I=J.deferEvaluation;var H=false;var L=function(N){var P=b.dependentObservable;b.dependentObservable=i;var Q=b.isWriteableObservable(N);b.dependentObservable=P;var O=i({read:function(){if(!H){b.utils.arrayRemoveItem(D,N);H=true}return N.apply(N,arguments)},write:Q&&function(R){return N(R)},deferEvaluation:true});if(d){O._wrapper=true}return O};J.deferEvaluation=true;var K=new i(M,G,J);if(!I){K=L(K);D.push(K)}return K};b.dependentObservable.fn=i.fn;b.computed=b.dependentObservable;var C=F();b.dependentObservable=E;b.computed=b.dependentObservable;return C}function x(ah,E,T,ai,H,C,ak){var S=B.getType(b.utils.unwrapObservable(E))==="array";C=C||"";if(B.isMapped(ah)){var G=b.utils.unwrapObservable(ah)[n];T=g(G,T)}var ad={data:E,parent:ak};var R=function(){return T[ai]&&T[ai].create instanceof Function};var J=function(am){return f(m,function(){if(b.utils.unwrapObservable(H) instanceof Array){return T[ai].create({data:am||ad.data,parent:ad.parent,skip:r})}else{return T[ai].create({data:am||ad.data,parent:ad.parent})}})};var aa=function(){return T[ai]&&T[ai].update instanceof Function};var P=function(an,am){var ao={data:am||ad.data,parent:ad.parent,target:b.utils.unwrapObservable(an)};if(b.isWriteableObservable(an)){ao.observable=an}return T[ai].update(ao)};var Y=v.get(E);if(Y){return Y}ai=ai||"";if(!S){if(!t(E)){switch(B.getType(E)){case"function":if(aa()){if(b.isWriteableObservable(E)){E(P(E));ah=E}else{ah=P(E)}}else{ah=E}break;default:if(b.isWriteableObservable(ah)){if(aa()){var V=P(ah);ah(V);return V}else{var V=b.utils.unwrapObservable(E);ah(V);return V}}else{if(R()){ah=J();return ah}else{ah=b.observable(b.utils.unwrapObservable(E));return ah}if(aa()){ah(P(ah));return ah}}}}else{ah=b.utils.unwrapObservable(ah);if(!ah){if(R()){var N=J();if(aa()){N=P(N)}return N}else{if(aa()){return P(N)}ah={}}}if(aa()){ah=P(ah)}v.save(E,ah);z(E,function(an){var aq=C.length?C+"."+an:an;if(b.utils.arrayIndexOf(T.ignore,aq)!=-1){return}if(b.utils.arrayIndexOf(T.copy,aq)!=-1){ah[an]=E[an];return}var ap=v.get(E[an]);var am=x(ah[an],E[an],T,an,ah,aq,ah);var ao=ap||am;if(b.isWriteableObservable(ah[an])){ah[an](b.utils.unwrapObservable(ao))}else{ah[an]=ao}T.mappedProperties[aq]=true})}}else{var O=[];var L=false;var U=function(am){return am};if(T[ai]&&T[ai].key){U=T[ai].key;L=true}if(!b.isObservable(ah)){ah=b.observableArray([]);ah.mappedRemove=function(an){var am=typeof an=="function"?an:function(ao){return ao===U(an)};return ah.remove(function(ao){return am(U(ao))})};ah.mappedRemoveAll=function(an){var am=u(an,U);return ah.remove(function(ao){return b.utils.arrayIndexOf(am,U(ao))!=-1})};ah.mappedDestroy=function(an){var am=typeof an=="function"?an:function(ao){return ao===U(an)};return ah.destroy(function(ao){return am(U(ao))})};ah.mappedDestroyAll=function(an){var am=u(an,U);return ah.destroy(function(ao){return b.utils.arrayIndexOf(am,U(ao))!=-1})};ah.mappedIndexOf=function(ao){var an=u(ah(),U);var am=U(ao);return b.utils.arrayIndexOf(an,am)};ah.mappedCreate=function(an){if(ah.mappedIndexOf(an)!==-1){throw new Error("There already is an object with the key that you specified.")}var am=R()?J(an):an;if(aa()){var ao=P(am,an);if(b.isWriteableObservable(am)){am(ao)}else{am=ao}}ah.push(am);return am}}var W=u(b.utils.unwrapObservable(ah),U).sort();var K=u(E,U);if(L){K.sort()}var ab=b.utils.compareArrays(W,K);var al={};var ag,af;var F=b.utils.unwrapObservable(E);var Q={};var ac=true;for(ag=0,af=F.length;ag<af;ag++){var M=U(F[ag]);if(M===undefined||M instanceof Object){ac=false;break}Q[M]=F[ag]}var aj=[];var I=0;for(ag=0,af=ab.length;ag<af;ag++){var M=ab[ag];var D;var ae=C+"["+ag+"]";switch(M.status){case"added":var X=ac?Q[M.value]:l(b.utils.unwrapObservable(E),M.value,U);D=x(undefined,X,T,ai,ah,ae,H);if(!R()){D=b.utils.unwrapObservable(D)}var Z=y(b.utils.unwrapObservable(E),X,al);if(D===r){I++}else{aj[Z-I]=D}al[Z]=true;break;case"retained":var X=ac?Q[M.value]:l(b.utils.unwrapObservable(E),M.value,U);D=l(ah,M.value,U);x(D,X,T,ai,ah,ae,H);var Z=y(b.utils.unwrapObservable(E),X,al);aj[Z]=D;al[Z]=true;break;case"deleted":D=l(ah,M.value,U);break}O.push({event:M.status,item:D})}ah(aj);if(T[ai]&&T[ai].arrayChanged){b.utils.arrayForEach(O,function(am){T[ai].arrayChanged(am.event,am.item)})}}return ah}function y(G,F,E){for(var D=0,C=G.length;D<C;D++){if(E[D]===true){continue}if(G[D]===F){return D}}return null}function e(C,E){var D;if(E){D=E(C)}if(B.getType(D)==="undefined"){D=C}return b.utils.unwrapObservable(D)}function l(H,E,G){H=b.utils.unwrapObservable(H);for(var D=0,C=H.length;D<C;D++){var F=H[D];if(e(F,G)===E){return F}}throw new Error("When calling ko.update*, the key '"+E+"' was not found!")}function u(D,C){return b.utils.arrayMap(b.utils.unwrapObservable(D),function(E){if(C){return e(E,C)}else{return E}})}function z(E,F){if(B.getType(E)==="array"){for(var D=0;D<E.length;D++){F(D)}}else{for(var C in E){F(C)}}}function t(C){var D=B.getType(C);return((D==="object")||(D==="array"))&&(C!==null)}function j(F,E,D){var C=F||"";if(B.getType(E)==="array"){if(F){C+="["+D+"]"}}else{if(F){C+="."}C+=D}return C}B.visitModel=function(F,H,D){D=D||{};D.visitedObjects=D.visitedObjects||new c();var G;var C=b.utils.unwrapObservable(F);if(!t(C)){return H(F,D.parentName)}else{D=s(D,C[n]);H(F,D.parentName);G=B.getType(C)==="array"?[]:{}}D.visitedObjects.save(F,G);var E=D.parentName;z(C,function(K){if(D.ignore&&b.utils.arrayIndexOf(D.ignore,K)!=-1){return}var I=C[K];D.parentName=j(E,C,K);if(b.utils.arrayIndexOf(D.copy,K)===-1){if(b.utils.arrayIndexOf(D.include,K)===-1){if(C[n]&&C[n].mappedProperties&&!C[n].mappedProperties[K]&&!(B.getType(C)==="array")){return}}}var J;switch(B.getType(b.utils.unwrapObservable(I))){case"object":case"array":case"undefined":var L=D.visitedObjects.get(I);G[K]=(B.getType(L)!=="undefined")?L:B.visitModel(I,H,D);break;default:G[K]=H(I,D.parentName)}});return G};function A(){var D=[];var C=[];this.save=function(F,G){var E=b.utils.arrayIndexOf(D,F);if(E>=0){C[E]=G}else{D.push(F);C.push(G)}};this.get=function(F){var E=b.utils.arrayIndexOf(D,F);var G=(E>=0)?C[E]:undefined;return G}}function c(){var C={};var D=function(F){var E;try{E=F}catch(G){E="$$$"}var H=C[E];if(H===undefined){H=new A();C[E]=H}return H};this.save=function(E,F){D(E).save(E,F)};this.get=function(E){return D(E).get(E)}}}));