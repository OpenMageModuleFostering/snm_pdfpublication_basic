(function(a){a.widget("ui.combobox",{_create:function(){var c,f=this,b=this.element.hide(),e=b.children(":selected"),g=e.val()?e.text():"",h=this.wrapper=a("<span>").addClass("ui-combobox").insertAfter(b);function d(i){var k=a(i).val(),l=new RegExp("^"+a.ui.autocomplete.escapeRegex(k)+"$","i"),j=false;b.children("option").each(function(){if(a(this).text().match(l)){this.selected=j=true;return false}});if(!j){a(i).val("").attr("title",k+" didn't match any item").tooltip("open");b.val("");setTimeout(function(){c.tooltip("close").attr("title","")},2500);c.data("autocomplete").term="";return false}}c=a("<input>").appendTo(h).val(g).attr("title","").addClass("ui-state-default ui-combobox-input").autocomplete({delay:0,minLength:0,source:function(j,i){var k=new RegExp(a.ui.autocomplete.escapeRegex(j.term),"i");i(b.children("option").map(function(){var l=a(this).text();if(this.value&&(!j.term||k.test(l))){return{label:l.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+a.ui.autocomplete.escapeRegex(j.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:l,option:this}}}))},select:function(i,j){j.item.option.selected=true;f._trigger("selected",i,{item:j.item.option})},change:function(i,j){if(!j.item){return d(this)}}}).addClass("ui-widget ui-widget-content ui-corner-left");c.data("uiAutocomplete")._renderItem=function(i,j){return a("<li>").append("<a>"+j.label+"</a>").appendTo(i)};a("<a>").attr("tabIndex",-1).tooltip().appendTo(h).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("ui-corner-right ui-combobox-toggle").click(function(){if(c.autocomplete("widget").is(":visible")){c.autocomplete("close");d(c);return}a(this).blur();c.autocomplete("search","");c.focus()});c.tooltip({position:{of:this.button},tooltipClass:"ui-state-highlight"})},destroy:function(){this.wrapper.remove();this.element.show();a.Widget.prototype.destroy.call(this)}})})(jQuery);